## 빈 자동,수동 등록 올바른 기준  
### 편리한 자동 기능을 기본으로 사용하자
1. 스프링이 나오고 시간이 갈수록 자동을 선호하는 추세이다. 
2. 스프링은 `@Controller`, `@Service`, `@Repostiry`처럼 계층에 맞추어 자동 스캔을 지원한다.
3. 최근 스프링 부트는 컴포넌트 스캔을 기본으로 하고, 스프링 부트의 다양한 빈들도 조건이 맞으면 자동으로 등록하도록 설계되었다. 
4. **결정적으로 자동 빈 등록을 사용해도 `OCP`, `DIP`를 지킬 수 있다.** 


### 수동 빈 등록은 언제 사용하지? 
> 애플리케이션은 크게 업무 로직과 기술 지원 로직으로 나뉜다. 

#### 업무 로직 빈 
1. 보통 비즈니스 요구사항을 개발할 때 추가되거나 변경된다. 
2. 웹을 지원하는 `Controller`, 핵심 비즈니스 로직이 있는 `Service`, 데이터 계층 로직을 처리하는 `Repository`가 모두 업무 로직이다. 
3. 숫자가 굉장히 많으며, 하나의 로직을 개발하게 되면 `Controller`, `Service`, `Repository`처럼 특정 패턴이 있다. 
4. **보통 문제가 발생해도 파악이 쉽다.**

#### 기술 지원 빈 
1. 공통 관심사(AOP)를 처리할 때 주로 사용된다.
2. DB 연결이나, 공통 로그 처리처럼 공통 업무 로직을 지원하기 위한 하부 기술이나 공통기술이다.
3. 업무 로직 빈에 비해 양이 굉장히 적고, 공통 로직이다 보니 애플리케이션 전반에 걸쳐 광범위하게 영향을 미친다.
4. 따라서 문제가 발생하면 파악하기가 굉장히 어렵다. 


#### 그러면 둘 중에 어디서 사용할까? 
1. 애플리케이션에 광범위하게 영향을 미치는 기술은 파악이 쉽도록 수동 빈으로 등록하여 설정 정보에서 한눈에 파악할 수 있도록 해야 한다. 
2. 따라서 기술 지원 빈을 수동 등록을 활용하는 것이 좋다. 


#### 비즈니스 로직 중에서 다향성을 적극적으로 활용할 때
```java
// DiscountPolicy -> (rateDiscountPolicy, fixDiscountPolicy) 
@Configuration
  public class DiscountPolicyConfig {
      @Bean
      public DiscountPolicy rateDiscountPolicy() {
          return new RateDiscountPolicy();
      }
      @Bean
      public DiscountPolicy fixDiscountPolicy() {
          return new FixDiscountPolicy();
      }
}
```
1. **다형성을 적극적으로 활용하는 경우 자동 등록을 사용하면 개발자들이 한눈에 파악하기 어렵다. (빈들의 이름, 어떤 빈이 주입될지...)** 
2. 따라서 이런 경우 위의 예시처럼 설정 파일을 추가해 수동 등록하는 것이 좋다.
3. 만약 자동 등록을 사용해야 한다면 특정 패키지에 같이 묶어놓는 것이 좋다. 
4. 핵심은 어떤 코드를 작성하든 한눈에 파악하기 쉬워야 유지보수가 쉽다. <br/>
**참고) 스프링과 스프링 부트가 자동으로 등록하는 수많은 빈들은 예외, 이런 부분들은 스프링의 의도대로 잘 사용하는 것이 중요**

<br/>

## 정리 
1. 편리한 자동 기능을 기본으로 사용하자.
2. 직접 등록하는 기술 지원 객체는 수동 등록하자.
3. 다형성을 적극 활용하는 비즈니스 로직은 수동 등록을 고민해보자.
4. 스프링이나 스프링 부트가 자동으로 등록하는 빈들은 내가 선택하는 것이 아닌 스피링의 의도대로 사용하자.
