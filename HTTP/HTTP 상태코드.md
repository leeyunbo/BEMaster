# HTTP 상태 코드 
### 클라이언트가 보낸 요청의 처리 상태를 응답에서 알려주는 기능 
* 1xx : 요청이 수신되어 처리중 (거의 사용되지 않음) 
* 2xx : 요청 정상 처리 -> 200 ok
* 3xx (Redirection)  : 요청을 완료하려면 추가 행동이 필요 -> Redirect에서 주로 사용됨 
* 4xx (Client Error)  : 클라이언트 오류, 잘못된 문법등으로 서버가 요청을 수행할 수 없음
* 5xx: (Server Error)  :  서버 오류, 서버가 정상 요청을 처리하지 못함 

### 만약 모르는 상태 코드가 나타나면? 
* 299 이러면 그냥 2xx로 처리하면 됨 
* 451??? 4xx
* 599??? 5xx  
* 즉, 클라이언트는 상위 상태코드로 해석해서 처리하면 된다. 

<br/>

## 1xx  - 요청이 수신되어 처리중
* 거의 사용되지 않으므로 패스 
* 실무에서 한번도 본적이 없음 

<br/>

## 2xx - 성공 
### 1. 200 OK
* 그냥 어떤 요청에 대한 성공 응답 

### 2. 201 Created  
* POST  요청에 대한 응답
* 요청 성공해서 새로운 리소스가 생성됨 
 
### 3. 202 Accepted  
* 요청이 접수되었으나 처리가 완료되지 않음 
* 배치 처리 같은 곳에서 사용 
* 요청 접수 후 1시간 뒤에 배치가 돈다. 

### 4. 204  No Content
* 서버가 요청을 성공적으로 수행했지만, 응답 바디에 보낼 데이터가 없음 
* 웹 문서 편집기에서 save버튼 같은 경우 서버가 응답을 해줄게 있나? 
* 단순히 저장 되었다는 결과만 보여주면 됨!
* 이럴 때 사용된다. 

<br/>

## 3xx - 요청을 완료하기 위해 유저 에이전트(브라우저)의 추가 조치 필요
### 1. 리다이렉션 이해
* 어떤  3xx 응답의 결과에 Location 헤더가 있으면, Location 위치로 자동 이동한다. 
* 보통 구 사이트 URL을 입력할 경우 신규 사이트로 이동할 수 있도록 하기 위해 사용 
* HTTP/1.1 301 Moved Permanently Location : /new-event-site

#### 리다이렉션 종류 
* 영구 리다이렉션 - 특정 리소스의 URI가 영구적으로 이동 
* 일시 리다이렉션 - 일시적인 변경 (주문 완료 후 주문 내역 화면으로 이동)
* 특수 리다이렉션 - 결과 대신 캐시를 사용한다.  
-> ( 클라이언트 : 캐시 정보를 보낸다, 만료 됐나? 서버 : 너 캐시에서 조회해도 되니까 캐시에서 조회 해!) 

### 2. 영구 리다이렉션 301, 308 
* 리소스의 URI가 영구적으로 이동 
* 원래의 URL을 사용 X, 검색 엔진 등에서도 변경 인지  (앗 이게 아니구나, 여기로 가야지!) 
* 301 Moved Permanently : 리다이렉트시 요청 메서드가 GET으로 변하고, 본문이 제거될 수 있음 
* 308 Permanent Redirect : 리다이렉트시 요청 메서드와 본문을 유지한다. 
* 보통은 301 Moved Permanently를 사용하는 것이 맞다, 왜냐면 폼도 변하니까. 

### 3. 일시적인 리다이렉션 302,307,303 
* 리소스의 URI가 일시적으로 변경 
* 검색 엔진 등에서 URL을 변경하면 안됨 
* 302 Found : 리다이렉트시 GET으로 변하고, *본문이 제거될 수 있음 (확실X)* 
-> 307과 303을 많이 쓰길 희망하지만(확실하니까) 아직 302가 많이 사용됨 
* 307 Temporary Redirect : 302와 기능은 같으며, *요청 메서드와 본문 유지 (확실O)*
* 303 See Other : 302와 기능은 같으며, *리다이렉트시 GET으로 변경 (확실O)* 

#### PRG : Post/Redirect/Get
* POST로 주문후에 웹 브라우저를 새로고침하면? -> 중복 주문이 될 수 있음 
* 새로고침은 마지막 요청을 재 실행하는 것 
* PRG를 사용하면 POST 주문후에 주문 결과 화면을 GET 메서드로 리다이렉트 
* 그러면 새로고침시 결과 화면만 반복적으로 GET으로 요청하게 됨 

#### 뭘 써야하나요? 302, 307, 303 
* 처음 302 스펙의 의도는 HTTP 메서드를 유지하려고 하는 것이였는데 웹 브라우저들이 GET으로 바꿔버림.. (일부는 또 다르게 동작함) 
* 그래서 모호한 302를 대신하는 명확한 307,303이 등장 
* 307, 303을 권장하지만 현실적으로 이미 많은 어플리케이션 라이브러리들이 302를 기본값으로 사용함 
* 자동 리다이렉션시에 GET으로 변해도 되면 그냥 302를 사용해도 큰 문제 없음 

### 4. 기타 리다이렉션 
#### 304  Not Modified
* 캐시를 목적으로 사용 
* 클라이언트에게 리소스가 수정되지 않아 캐시를 재사용해도 된다고 알려줌 
* 304 응답은 본문이 있으면 안됨 
* 조건부 GET, HEAD 요청시 사용 

<br/>

## 4xx - 클라이언트 오류 
### 1. 클라이언트 오류란?
* 클라이언트의 요청에 잘못된 문법등으로 서버가 요청을 수행할 수 없음 
* 클라이언트의 요청이 잘못되어서 똑같은 재시도여도 무조건 실패함 
* (반대로 서버 오류는 재시도에 성공할 가능성도 있음 Ex) DB 에러)  

### 2. 404 Bad Request  
#### 클라이언트가 잘못된 요청을 해서 서버가 요청을 처리할 수 없음 
* 요청 구문, 메시지 등등 오류 
* 클라이언트는 요청 내용을 수정해야함 
* Ex) 요청 파라미터가 잘못되거나, API 스펙이 맞지 않는 경우 

### 3. 401 Unauthorized 
#### 클라이언트가 해당 리소스에 대한 인증이 필요함 
* 인증이 되지 않음 
* 401 오류 발생시 응답에 WWW-Authenticate 헤더와 함께 인증 방법 설명 
* 인증 : 본인이 누구인지 확인 (로그인) 
* 인가 : 권한부여 (ADMIN 권한과 같은) 
* 이름이 UnAuthenticate면 더 맞았을텐데.. 아쉽 

### 4. 403 Forbidden 
#### 서버가 요청을 이해했지만 승인을 거부함 
* 인증 자격 증명은 있지만, 접근 권한 불충분 
* 커먼 등급 유저가 로그인은 했지만 어드민이 아닌 경우 

### 404 Not Found 
#### 요청 리소스를 찾을 수 없음 
* 리소스가 없거나, 권한이 부족하여 해당 리소스를 숨기고 싶을 때 (그냥 404로 하고 싶음) 

<br/>

## 5xx - 서버 오류 
### 1. 서버 오류란? 
* 서버 문제로 오류 발생 
* 재시도 하면 성공할수도 (복구됨) 
* 되도록이면 500 에러는 발생시키면 안됨, 정말로 서버에 문제가 발생한 경우 발생 

### 2. 500 Internal Server Error 
#### 서버 내부 문제로 오류 발생 

### 3. 503 Service Unavailable 
#### 서비스 이용 불가 
* 일시적인 과부화 또는 예정된 작업으로 요청 처리 불가 
* Retry-After 헤더 필드로 예상 시간을 알려줄 수 있음 
